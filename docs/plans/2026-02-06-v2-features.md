# todoist-cli v2 — Feature Roadmap

> Synthesized from competitor research, UX analysis, and API capabilities audit.

---

## Phase 0: CRITICAL — API Migration (Deadline: Feb 10, 2026)

REST API v2 shuts down Feb 10. Must migrate to Todoist API v1.

| Task | Effort | Files |
|------|--------|-------|
| Rewrite `src/api/client.ts` for API v1 base URL + auth | LOW | 1 |
| Update all endpoint paths and response types | MEDIUM | 5 |
| Add new type definitions for v1 responses | LOW | 1 |
| Test all existing commands still work | LOW | — |

---

## Phase 1: Core Power Features

### 1.1 Todoist Filter Syntax
`todoist task list --filter "today & p1 & #Work"`
- Pass filter string directly to API `filter` param (server-side)
- Replaces verbose `--today --priority 1 --project X` flags
- Effort: LOW | Impact: HIGH

### 1.2 Shortcut Commands
```
todoist today        → task list --filter "today | overdue"
todoist inbox        → task list --filter "#Inbox"
```
- Effort: LOW | Impact: HIGH

### 1.3 Sections CRUD
```
todoist section list --project <id>
todoist section create "Backlog" --project <id>
todoist task add "Fix bug" --section <id>
```
- New API endpoints + CLI commands
- Effort: LOW | Impact: HIGH

### 1.4 Subtask Support
```
todoist task add "Write outline" --parent <id>
todoist task list --tree          # hierarchical view
todoist task list --filter "!subtask"  # parents only
```
- Tree rendering in CLI and TUI
- Effort: MEDIUM | Impact: HIGH

### 1.5 Natural Language Quick-Add
```
todoist add "Buy milk tomorrow #Shopping p1 @errands"
```
- Parse Todoist Quick Add syntax: #project, @label, p1-p4, date strings
- Effort: MEDIUM | Impact: HIGH

---

## Phase 2: Output & Composability (CLI UX)

### 2.1 JSON Output + jq
```
todoist task list --json id,content,priority
todoist task list --json id,content --jq '.[].content'
todoist task add "text" --quiet   # print only ID
```
- `--json <fields>`, `--jq <expr>`, `--quiet`
- TTY-aware: colors when terminal, plain when piped
- Effort: MEDIUM | Impact: HIGH

### 2.2 Shell Completions
```
todoist completion bash > ~/.bash_completion.d/todoist
todoist completion zsh > ~/.zfunc/_todoist
todoist completion fish > ~/.config/fish/completions/todoist.fish
```
- Commander.js has built-in completion support
- Dynamic completions for project/label names
- Effort: LOW | Impact: HIGH

### 2.3 Error Handling UX
- "Did you mean?" for typos
- Semantic exit codes (0=ok, 2=usage, 3=auth, 4=network, 5=not found)
- Actionable messages with recovery commands
- Effort: LOW | Impact: MEDIUM

### 2.4 Task Grouping
```
todoist task list --group-by project
todoist task list --group-by label
todoist task list --group-by date
```
- Effort: LOW | Impact: MEDIUM

---

## Phase 3: Productivity Workflows

### 3.1 Completed Tasks History
```
todoist completed                   # today
todoist completed --since "7 days"  # this week
todoist completed --group-by project
```
- Requires API v1 completed tasks endpoint
- Effort: MEDIUM | Impact: HIGH

### 3.2 Weekly Review (`todoist review`)
Guided GTD-style interactive review:
1. Process Inbox → move/label/schedule each item
2. Check @waiting items → update status
3. Handle overdue tasks → reschedule or complete
4. Review tasks with no date → assign or @someday
5. Show completed this week → summary stats
- Effort: HIGH | Impact: HIGH

### 3.3 Eisenhower Matrix (`todoist matrix`)
```
┌─────────────────────┬─────────────────────┐
│ DO FIRST (p1)       │ SCHEDULE (p2)       │
│ ☐ Fix prod bug      │ ☐ Write tests       │
│ ☐ Client deadline   │ ☐ Plan Q2 roadmap   │
├─────────────────────┼─────────────────────┤
│ DELEGATE (p3)       │ ELIMINATE (p4)      │
│ ☐ Update docs       │ ☐ Reorganize files  │
└─────────────────────┴─────────────────────┘
```
- Effort: LOW | Impact: MEDIUM

### 3.4 Today Timeline
```
todoist today --timeline
09:00-11:00  [2h] Deep work on report     p1
14:00-15:00  [1h] Team meeting            p2
      (no time) Buy groceries             p4
```
- Effort: MEDIUM | Impact: MEDIUM

### 3.5 Activity Log
```
todoist log              # today's activity
todoist log --since "3 days"
```
- Effort: LOW | Impact: MEDIUM

### 3.6 Karma & Stats
```
todoist stats
Karma: 14,523 (Enlightened)
Streak: 12 days
Completed today: 8 | This week: 42
```
- Effort: LOW | Impact: MEDIUM

---

## Phase 4: TUI Enhancements

### 4.1 Fuzzy Search
- `/` activates filter-as-you-type in task list
- Effort: MEDIUM | Impact: HIGH

### 4.2 Multi-Select & Bulk Operations
- `Space` toggle select, `v` range select, `Ctrl-a` select all
- Bulk complete, delete, move, relabel
- Effort: MEDIUM | Impact: HIGH

### 4.3 Help Overlay
- `?` shows full keybinding reference
- Context-sensitive shortcut bar at bottom
- Effort: LOW | Impact: MEDIUM

### 4.4 Sort Menu
- `s` opens sort by: priority, date, name, project
- Effort: LOW | Impact: MEDIUM

### 4.5 Task Detail View
- `Enter` opens expanded task view with subtasks, comments, metadata
- `Esc` returns to list
- Effort: MEDIUM | Impact: MEDIUM

### 4.6 Command Palette
- `:` opens k9s-style command input
- Quick access to any action by name
- Effort: MEDIUM | Impact: MEDIUM

---

## Phase 5: Integration & Advanced

### 5.1 fzf Integration
```
todoist fzf complete    # fuzzy-select → complete
todoist fzf view        # fuzzy-select → view details
```
- Effort: LOW | Impact: MEDIUM

### 5.2 Context Switching
```
todoist context set work --filter "#Work | #Meetings"
todoist context set personal --filter "#Personal | #Shopping"
todoist context use work   # all commands filter through context
todoist context clear
```
- Effort: MEDIUM | Impact: MEDIUM

### 5.3 Urgency Scoring
- Computed score: due proximity + priority + age + labels
- Smart sort by urgency
- Effort: MEDIUM | Impact: MEDIUM

### 5.4 Batch Operations
```
todoist bulk complete <id1> <id2> <id3>
todoist bulk move --project Work <id1> <id2>
todoist bulk label --add @urgent <id1> <id2>
```
- Uses API v1 sync endpoint for single-request execution
- Effort: MEDIUM | Impact: MEDIUM

---

## Development Team Plan

### Team Structure (4 agents)

| Agent | Phase | Tasks |
|-------|-------|-------|
| **api-migrator** | 0 + API work | API v1 migration, new endpoints (sections, completed, activity, stats) |
| **cli-power** | 1 + 2 | Filter syntax, shortcuts, quick-add, JSON output, shell completions, error UX, grouping |
| **workflow-dev** | 3 | Review command, matrix, timeline, stats, activity log |
| **tui-enhancer** | 4 | Fuzzy search, multi-select, help overlay, sort menu, detail view, command palette |

### Execution Order
1. **api-migrator** runs first (Phase 0 is blocking, deadline Feb 10)
2. **cli-power** starts after API migration (depends on new client)
3. **workflow-dev** + **tui-enhancer** run in parallel after cli-power lays groundwork
